import{r as l,j as t}from"./index-Dhaq65pZ.js";function g({id:n,name:o,image:d,types:u,stats:i,onAddToFavorites:c}){const[r,a]=l.useState(!1),e=()=>{a(!r),c&&c({id:n,name:o,image:d,types:u,stats:i})};return t.jsxs("div",{className:"relative bg-slate-900 rounded-3xl shadow p-6 m-4 flex flex-col items-center",children:[t.jsx("button",{onClick:e,className:"absolute top-4 right-4","aria-label":"Favorite button",children:r?t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#307CBF",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#307CBF",className:"h-6 w-auto",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2 9.1371C2 14 6.01943 16.5914 8.96173 18.9109C10 19.7294 11 20.5 12 20.5C13 20.5 14 19.7294 15.0383 18.9109C17.9806 16.5914 22 14 22 9.1371C22 4.27416 16.4998 0.825464 12 5.50063C7.50016 0.825464 2 4.27416 2 9.1371Z"})}):t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"#475569",className:"h-6 w-auto",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2 9.1371C2 14 6.01943 16.5914 8.96173 18.9109C10 19.7294 11 20.5 12 20.5C13 20.5 14 19.7294 15.0383 18.9109C17.9806 16.5914 22 14 22 9.1371C22 4.27416 16.4998 0.825464 12 5.50063C7.50016 0.825464 2 4.27416 2 9.1371Z"})})}),t.jsxs("h2",{className:"capitalize font-bold text-lg mb-1",children:[n,". ",o]}),t.jsx("img",{src:d,alt:o,className:" h-28 w-auto object-contain mb-1"}),t.jsx("div",{className:"flex space-x-2 mb-2",children:u.map(s=>t.jsx("span",{className:`text-xs text-white font-semibold px-2 py-1 rounded capitalize ${p(s)}`,children:s},s))}),t.jsx("div",{className:"text-sm w-full",children:i.map(s=>t.jsxs("div",{className:"flex justify-between my-1",children:[t.jsxs("span",{className:"capitalize",children:[s.name,":"]}),t.jsx("span",{children:s.base})]},s.name))})]})}function p(n){switch(n.toLowerCase()){case"normal":return"bg-type-normal/90";case"fire":return"bg-type-fire/90";case"water":return"bg-type-water/90";case"electric":return"bg-type-electric/90";case"grass":return"bg-type-grass/90";case"ice":return"bg-type-ice/90";case"fighting":return"bg-type-fighting/90";case"poison":return"bg-type-poison/90";case"ground":return"bg-type-ground/90";case"flying":return"bg-type-flying/90";case"psychic":return"bg-type-psychic/90";case"bug":return"bg-type-bug/90";case"rock":return"bg-type-rock/90";case"ghost":return"bg-type-ghost/90";case"dark":return"bg-type-dark/90";case"dragon":return"bg-type-dragon/90";case"steel":return"bg-type-steel/90";case"fairy":return"bg-type-fairy/90";default:return"bg-gray-300"}}const f=20;async function m(n=0){const o=await fetch(`https://pokeapi.co/api/v2/pokemon?offset=${n}&limit=${f}`);if(!o.ok)throw new Error("Failed to fetch Pokemon list");const u=(await o.json()).results.map(async c=>{const r=await fetch(`${c.url}`);if(!r.ok)throw new Error("Failed to fetch pokemon detail");const a=await r.json();return{id:a.id,name:a.name,image:a.sprites.front_shiny||a.sprites.front_default||"",types:a.types.map(e=>e.type.name),stats:a.stats.slice(0,4).map(e=>({name:e.stat.name,base:e.base_stat}))}});return await Promise.all(u)}function x(){const[n,o]=l.useState([]),[d,u]=l.useState(0),[i,c]=l.useState(!1),r=l.useRef(null),a=async()=>{if(!i){c(!0);try{const e=await m(d,20);o(s=>[...s,...e]),u(s=>s+20)}catch(e){console.error(e)}finally{c(!1)}}};return l.useEffect(()=>{a()},[]),l.useEffect(()=>{if(n.length===0)return;const e=new IntersectionObserver(s=>{s[0].isIntersecting&&!i&&a()},{rootMargin:"-30px"});return r.current&&e.observe(r.current),()=>{r.current&&e.unobserve(r.current)}},[n,i]),t.jsxs("div",{className:" w-screen px-4 py-6",children:[t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map(e=>t.jsx(g,{id:e.id,name:e.name,image:e.image,types:e.types,stats:e.stats},e.id))}),t.jsx("div",{ref:r,className:"py-4"}),i&&t.jsx("p",{className:"text-center text-yellow-400 font-bold mt-4 text-lg",children:"Loading Pokemons..."})]})}export{x as default};
