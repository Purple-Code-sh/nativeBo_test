import{r as i,j as t}from"./index-DRRj9i9u.js";import{P as h,S as g}from"./ScrollToTopButton-Bbez0fCS.js";const b=20;async function y(m=0){const n=await fetch(`https://pokeapi.co/api/v2/pokemon?offset=${m}&limit=${b}`);if(!n.ok)throw new Error("Failed to fetch Pokemon list");const a=(await n.json()).results.map(async u=>{const r=await fetch(`${u.url}`);if(!r.ok)throw new Error("Failed to fetch pokemon detail");const l=await r.json();return{id:l.id,name:l.name,image:l.sprites.front_shiny||l.sprites.front_default||"",types:l.types.map(o=>o.type.name),stats:l.stats.slice(0,4).map(o=>({name:o.stat.name,base:o.base_stat}))}});return await Promise.all(a)}function w(){async function m(f){const d=await fetch(`https://pokeapi.co/api/v2/pokemon/${f.toLowerCase()}`);if(!d.ok)throw new Error("Pokemon not found");const e=await d.json();return{id:e.id,name:e.name,image:e.sprites.front_shiny||e.sprites.front_default,types:e.types.map(s=>s.type.name),stats:e.stats.slice(0,4).map(s=>({name:s.stat.name,base:s.base_stat}))}}const[n,x]=i.useState(""),[a,c]=i.useState(null),[u,r]=i.useState(!1),l=async f=>{if(f.preventDefault(),r(!1),c(null),!!n)try{const d=await m(n);console.log(d),c(d),r(!1)}catch(d){console.error("Single Pokemon search error:",d),r(!0)}},o=()=>{x(""),r(!1),c(null)};return t.jsxs("div",{className:"flex flex-col mb-10 ",children:[t.jsxs("form",{onSubmit:l,className:"flex flex-col md:flex-row text-center mb-4",children:[t.jsxs("div",{className:"flex",children:[t.jsx("input",{type:"text",placeholder:"Type Name or Number",value:n,onChange:f=>x(f.target.value),className:" grow border -mr-10 py-3 px-5 rounded-l-xl border-gray-700 focus:outline-none focus:border-yellow-500 bg-gray-800 text-gray-200"}),t.jsx("button",{type:"submit",className:"w-fit bg-blue-heart text-slate-900 px-4 rounded-r-xl font-semibold flex-none",disabled:!n,children:"Search"})]}),n&&t.jsx("button",{type:"button",onClick:o,className:"w-fit mt-4 md:mt-0 ml-2 px-6 py-2 bg-gray-800 rounded-xl text-gray-300 font-semibold flex-none self-center md:self-auto",children:"Clear"})]}),a&&t.jsxs("div",{className:"w-full",children:[t.jsx(h,{id:a.id,name:a.name,image:a.image,types:a.types,stats:a.stats},a.id),t.jsx("hr",{className:" rounded border-gray-700 my-4"})]}),u&&n&&t.jsxs("div",{children:[t.jsx("p",{className:"w-full text-center my-6",children:"Pokemon not founded ðŸ˜ž"}),t.jsx("hr",{className:" rounded border-gray-700 my-4"})]})]})}const p=[{id:1,label:"Generation 1",region:"(Kanto)",offset:0},{id:2,label:"Generation 2",region:"(Johto)",offset:151},{id:3,label:"Generation 3",region:"(Hoenn)",offset:251},{id:4,label:"Generation 4",region:"(Sinnoh)",offset:386},{id:5,label:"Generation 5",region:"(Unova)",offset:493},{id:6,label:"Generation 6",region:"(Kalos)",offset:649},{id:7,label:"Generation 7",region:"(Alola)",offset:721},{id:8,label:"Generation 8",region:"(Galar)",offset:809},{id:9,label:"Generation 9",region:"(Paldea)",offset:905}];function k(){const[m,n]=i.useState([]),[x,a]=i.useState(p[0].offset),[c,u]=i.useState(!1),[r,l]=i.useState(0),o=i.useRef(null),f=async()=>{if(!c){u(!0);try{const e=await y(x,20);n(s=>[...s,...e]),a(s=>s+20)}catch(e){console.error(e)}finally{u(!1)}}};i.useEffect(()=>{f()},[r]),i.useEffect(()=>{if(m.length===0)return;const e=new IntersectionObserver(s=>{s[0].isIntersecting&&!c&&f()},{rootMargin:"-30px"});return o.current&&e.observe(o.current),()=>{o.current&&e.unobserve(o.current)}},[m,c]);const d=e=>{const s=parseInt(e.target.value);l(s),a(s),n([])};return t.jsxs("div",{className:" w-screen px-4 py-6",children:[t.jsx("div",{className:"w-full sm:w-1/2 md:w-1/3 lg:w-1/4 mx-auto",children:t.jsx(w,{})}),t.jsx("h1",{className:"capitalize text-center font-bold text-xl my-4 opacity-85",children:"All pokemons"}),t.jsxs("div",{className:"mb-4 text-center",children:[t.jsx("label",{htmlFor:"genSelect",className:"mr-2 text-slate-400",children:"Start from:"}),t.jsx("select",{id:"genSelect",value:r,onChange:d,className:`p-2 bg-slate-900 rounded-xl text-slate-400 font-bold focus:outline-none 
                    focus:border focus:border-yellow-600 `,children:p.map(e=>t.jsxs("option",{value:e.offset,children:[e.label," ",e.region]},e.id))})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:m.map(e=>t.jsx(h,{id:e.id,name:e.name,image:e.image,types:e.types,stats:e.stats},e.id))}),t.jsx("div",{ref:o,className:"py-4"}),c&&t.jsx("p",{className:"text-center text-yellow-400 font-bold mt-4 text-lg",children:"Loading Pokemons..."}),t.jsx(g,{})]})}export{k as default};
