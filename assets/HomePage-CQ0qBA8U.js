import{r as a,j as i}from"./index-D_8IuMoL.js";import{P as d}from"./PokemonCard-CJfEsfs0.js";const u=20;async function p(r=0){const c=await fetch(`https://pokeapi.co/api/v2/pokemon?offset=${r}&limit=${u}`);if(!c.ok)throw new Error("Failed to fetch Pokemon list");const f=(await c.json()).results.map(async l=>{const s=await fetch(`${l.url}`);if(!s.ok)throw new Error("Failed to fetch pokemon detail");const t=await s.json();return{id:t.id,name:t.name,image:t.sprites.front_shiny||t.sprites.front_default||"",types:t.types.map(e=>e.type.name),stats:t.stats.slice(0,4).map(e=>({name:e.stat.name,base:e.base_stat}))}});return await Promise.all(f)}function w(){const[r,c]=a.useState([]),[m,f]=a.useState(0),[o,l]=a.useState(!1),s=a.useRef(null),t=async()=>{if(!o){l(!0);try{const e=await p(m,20);c(n=>[...n,...e]),f(n=>n+20)}catch(e){console.error(e)}finally{l(!1)}}};return a.useEffect(()=>{t()},[]),a.useEffect(()=>{if(r.length===0)return;const e=new IntersectionObserver(n=>{n[0].isIntersecting&&!o&&t()},{rootMargin:"-30px"});return s.current&&e.observe(s.current),()=>{s.current&&e.unobserve(s.current)}},[r,o]),i.jsxs("div",{className:" w-screen px-4 py-6",children:[i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map(e=>i.jsx(d,{id:e.id,name:e.name,image:e.image,types:e.types,stats:e.stats},e.id))}),i.jsx("div",{ref:s,className:"py-4"}),o&&i.jsx("p",{className:"text-center text-yellow-400 font-bold mt-4 text-lg",children:"Loading Pokemons..."})]})}export{w as default};
