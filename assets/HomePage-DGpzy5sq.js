import{R as k,j as u,r as b}from"./index-C7fcA52M.js";const F=20;async function L(e=0){const n=await fetch(`https://pokeapi.co/api/v2/pokemon?offset=${e}&limit=${F}`);if(!n.ok)throw new Error("Failed to fetch Pokemon list");const r=(await n.json()).results.map(async s=>{const d=await fetch(`${s.url}`);if(!d.ok)throw new Error("Failed to fetch pokemon detail");const l=await d.json();return{id:l.id,name:l.name,image:l.sprites.front_shiny||l.sprites.front_default||"",types:l.types.map(o=>o.type.name),stats:l.stats.slice(0,4).map(o=>({name:o.stat.name,base:o.base_stat}))}});return await Promise.all(r)}const I=e=>{let n;const t=new Set,r=(c,f)=>{const h=typeof c=="function"?c(n):c;if(!Object.is(h,n)){const y=n;n=f??(typeof h!="object"||h===null)?h:Object.assign({},n,h),t.forEach(p=>p(n,y))}},a=()=>n,l={setState:r,getState:a,getInitialState:()=>o,subscribe:c=>(t.add(c),()=>t.delete(c))},o=n=e(r,a,l);return l},R=e=>e?I(e):I,E=e=>e;function _(e,n=E){const t=k.useSyncExternalStore(e.subscribe,()=>n(e.getState()),()=>n(e.getInitialState()));return k.useDebugValue(t),t}const C=e=>{const n=R(e),t=r=>_(n,r);return Object.assign(t,n),t},O=e=>e?C(e):C;function N(e,n){let t;try{t=e()}catch{return}return{getItem:a=>{var s;const d=o=>o===null?null:JSON.parse(o,void 0),l=(s=t.getItem(a))!=null?s:null;return l instanceof Promise?l.then(d):d(l)},setItem:(a,s)=>t.setItem(a,JSON.stringify(s,void 0)),removeItem:a=>t.removeItem(a)}}const j=e=>n=>{try{const t=e(n);return t instanceof Promise?t:{then(r){return j(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return j(r)(t)}}}},H=(e,n)=>(t,r,a)=>{let s={storage:N(()=>localStorage),partialize:i=>i,version:0,merge:(i,v)=>({...v,...i}),...n},d=!1;const l=new Set,o=new Set;let c=s.storage;if(!c)return e((...i)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...i)},r,a);const f=()=>{const i=s.partialize({...r()});return c.setItem(s.name,{state:i,version:s.version})},h=a.setState;a.setState=(i,v)=>{h(i,v),f()};const y=e((...i)=>{t(...i),f()},r,a);a.getInitialState=()=>y;let p;const S=()=>{var i,v;if(!c)return;d=!1,l.forEach(m=>{var g;return m((g=r())!=null?g:y)});const x=((v=s.onRehydrateStorage)==null?void 0:v.call(s,(i=r())!=null?i:y))||void 0;return j(c.getItem.bind(c))(s.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==s.version){if(s.migrate){const g=s.migrate(m.state,m.version);return g instanceof Promise?g.then(w=>[!0,w]):[!0,g]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var g;const[w,P]=m;if(p=s.merge(P,(g=r())!=null?g:y),t(p,!0),w)return f()}).then(()=>{x==null||x(p,void 0),p=r(),d=!0,o.forEach(m=>m(p))}).catch(m=>{x==null||x(void 0,m)})};return a.persist={setOptions:i=>{s={...s,...i},i.storage&&(c=i.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>S(),hasHydrated:()=>d,onHydrate:i=>(l.add(i),()=>{l.delete(i)}),onFinishHydration:i=>(o.add(i),()=>{o.delete(i)})},s.skipHydration||S(),p||y},B=H,M=O(B((e,n)=>({favoritePokemons:[],addFavorite:t=>{const r=n().favoritePokemons;r.some(s=>s.id===t.id)||e({favoritePokemons:[...r,t]})},removeFavorite:t=>{const r=n().favoritePokemons.filter(a=>a.id!==t);e({favoritePokemons:r})}}),{name:"favorite-pokemons",storage:N(()=>localStorage)}));function $({id:e,name:n,image:t,types:r,stats:a}){const{favoritePokemons:s,addFavorite:d,removeFavorite:l}=M(),o=s.some(f=>f.id===e),c=()=>{o?l(e):d({id:e,name:n,image:t,types:r,stats:a})};return u.jsxs("div",{className:"relative bg-slate-900 rounded-3xl shadow p-6 m-4 flex flex-col items-center",children:[u.jsx("button",{onClick:c,className:"absolute top-4 right-4","aria-label":"Favorite button",children:o?u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#307CBF",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#307CBF",className:"h-6 w-auto",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2 9.1371C2 14 6.01943 16.5914 8.96173 18.9109C10 19.7294 11 20.5 12 20.5C13 20.5 14 19.7294 15.0383 18.9109C17.9806 16.5914 22 14 22 9.1371C22 4.27416 16.4998 0.825464 12 5.50063C7.50016 0.825464 2 4.27416 2 9.1371Z"})}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"#475569",className:"h-6 w-auto",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2 9.1371C2 14 6.01943 16.5914 8.96173 18.9109C10 19.7294 11 20.5 12 20.5C13 20.5 14 19.7294 15.0383 18.9109C17.9806 16.5914 22 14 22 9.1371C22 4.27416 16.4998 0.825464 12 5.50063C7.50016 0.825464 2 4.27416 2 9.1371Z"})})}),u.jsxs("h2",{className:"capitalize font-bold text-lg mb-1",children:[e,". ",n]}),u.jsx("img",{src:t,alt:n,className:" h-28 w-auto object-contain mb-1"}),u.jsx("div",{className:"flex space-x-2 mb-2",children:r.map(f=>u.jsx("span",{className:`text-xs text-white font-semibold px-2 py-1 rounded capitalize ${D(f)}`,children:f},f))}),u.jsx("div",{className:"text-sm w-full",children:a.map(f=>u.jsxs("div",{className:"flex justify-between my-1",children:[u.jsxs("span",{className:"capitalize",children:[f.name,":"]}),u.jsx("span",{children:f.base})]},f.name))})]})}function D(e){switch(e.toLowerCase()){case"normal":return"bg-type-normal/90";case"fire":return"bg-type-fire/90";case"water":return"bg-type-water/90";case"electric":return"bg-type-electric/90";case"grass":return"bg-type-grass/90";case"ice":return"bg-type-ice/90";case"fighting":return"bg-type-fighting/90";case"poison":return"bg-type-poison/90";case"ground":return"bg-type-ground/90";case"flying":return"bg-type-flying/90";case"psychic":return"bg-type-psychic/90";case"bug":return"bg-type-bug/90";case"rock":return"bg-type-rock/90";case"ghost":return"bg-type-ghost/90";case"dark":return"bg-type-dark/90";case"dragon":return"bg-type-dragon/90";case"steel":return"bg-type-steel/90";case"fairy":return"bg-type-fairy/90";default:return"bg-gray-300"}}function J(){const[e,n]=b.useState([]),[t,r]=b.useState(0),[a,s]=b.useState(!1),d=b.useRef(null),l=async()=>{if(!a){s(!0);try{const o=await L(t,20);n(c=>[...c,...o]),r(c=>c+20)}catch(o){console.error(o)}finally{s(!1)}}};return b.useEffect(()=>{l()},[]),b.useEffect(()=>{if(e.length===0)return;const o=new IntersectionObserver(c=>{c[0].isIntersecting&&!a&&l()},{rootMargin:"-30px"});return d.current&&o.observe(d.current),()=>{d.current&&o.unobserve(d.current)}},[e,a]),u.jsxs("div",{className:" w-screen px-4 py-6",children:[u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(o=>u.jsx($,{id:o.id,name:o.name,image:o.image,types:o.types,stats:o.stats},o.id))}),u.jsx("div",{ref:d,className:"py-4"}),a&&u.jsx("p",{className:"text-center text-yellow-400 font-bold mt-4 text-lg",children:"Loading Pokemons..."})]})}export{J as default};
